{"version":3,"file":"TriggerPipelineOnClick.js","sources":["../../../src/triggers/TriggerPipelineOnClick.js"],"sourcesContent":["import React from 'react'\nimport PropTypes from 'prop-types'\nimport usePipeline from '../hooks/use-pipeline'\n\nfunction TriggerPipelineOnClick ({ children, onlyTriggerWhenIdle = true, preventDefault = true }) {\n  const pipeline = usePipeline()\n\n  const isCurrentlyPipingRef = React.useRef(false)\n\n  const handleClick = (e) => {\n    if (e && preventDefault === true) {\n      if (typeof e.preventDefault === 'function') {\n        e.preventDefault()\n      }\n      if (typeof e.stopPropagation === 'function') {\n        e.stopPropagation()\n      }\n      if (typeof e.persist === 'function') {\n        e.persist()\n      }\n    }\n\n    if (onlyTriggerWhenIdle === true && isCurrentlyPipingRef.current === true) {\n      return\n    }\n\n    isCurrentlyPipingRef.current = true\n\n    const payload = {\n      clickEvent: e\n    }\n\n    pipeline.trigger(payload)\n      .then((p) => {\n        isCurrentlyPipingRef.current = false\n        return p\n      })\n      .catch((err) => {\n        isCurrentlyPipingRef.current = false\n      })\n  }\n\n  return React.Children.map(children, (child) => (\n    React.cloneElement(child, { onClick: handleClick })\n  ))\n}\n\nTriggerPipelineOnClick.propTypes = {\n  onlyTriggerWhenIdle: PropTypes.bool,\n  preventDefault: PropTypes.bool\n}\n\nexport default TriggerPipelineOnClick\n"],"names":["TriggerPipelineOnClick","children","onlyTriggerWhenIdle","preventDefault","pipeline","usePipeline","isCurrentlyPipingRef","React","useRef","handleClick","e","stopPropagation","persist","current","payload","clickEvent","trigger","then","p","catch","err","Children","map","child","cloneElement","onClick","propTypes","PropTypes","bool"],"mappings":";;;;AAIA,SAASA,sBAAT,CAAkG,IAAA,EAAA;AAAA,EAA/DC,IAAAA,QAA+D,QAA/DA,QAA+D;AAAA,MAAA,qBAAA,GAAA,IAAA,CAArDC,mBAAqD;AAAA,MAArDA,mBAAqD,sCAA/B,IAA+B,GAAA,qBAAA;AAAA,MAAA,mBAAA,GAAA,IAAA,CAAzBC,cAAyB;AAAA,MAAzBA,cAAyB,oCAAR,IAAQ,GAAA,mBAAA,CAAA;AAChG,EAAMC,IAAAA,QAAQ,GAAGC,WAAW,EAA5B,CAAA;AAEA,EAAA,IAAMC,oBAAoB,GAAGC,KAAK,CAACC,MAAN,CAAa,KAAb,CAA7B,CAAA;;AAEA,EAAA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,CAAD,EAAO;AACzB,IAAA,IAAIA,CAAC,IAAIP,cAAc,KAAK,IAA5B,EAAkC;AAChC,MAAA,IAAI,OAAOO,CAAC,CAACP,cAAT,KAA4B,UAAhC,EAA4C;AAC1CO,QAAAA,CAAC,CAACP,cAAF,EAAA,CAAA;AACD,OAAA;;AACD,MAAA,IAAI,OAAOO,CAAC,CAACC,eAAT,KAA6B,UAAjC,EAA6C;AAC3CD,QAAAA,CAAC,CAACC,eAAF,EAAA,CAAA;AACD,OAAA;;AACD,MAAA,IAAI,OAAOD,CAAC,CAACE,OAAT,KAAqB,UAAzB,EAAqC;AACnCF,QAAAA,CAAC,CAACE,OAAF,EAAA,CAAA;AACD,OAAA;AACF,KAAA;;AAED,IAAIV,IAAAA,mBAAmB,KAAK,IAAxB,IAAgCI,oBAAoB,CAACO,OAArB,KAAiC,IAArE,EAA2E;AACzE,MAAA,OAAA;AACD,KAAA;;AAEDP,IAAAA,oBAAoB,CAACO,OAArB,GAA+B,IAA/B,CAAA;AAEA,IAAA,IAAMC,OAAO,GAAG;AACdC,MAAAA,UAAU,EAAEL,CAAAA;AADE,KAAhB,CAAA;AAIAN,IAAAA,QAAQ,CAACY,OAAT,CAAiBF,OAAjB,EACGG,IADH,CACQ,UAACC,CAAD,EAAO;AACXZ,MAAAA,oBAAoB,CAACO,OAArB,GAA+B,KAA/B,CAAA;AACA,MAAA,OAAOK,CAAP,CAAA;AACD,KAJH,CAKGC,CAAAA,KALH,CAKS,UAACC,GAAD,EAAS;AACdd,MAAAA,oBAAoB,CAACO,OAArB,GAA+B,KAA/B,CAAA;AACD,KAPH,CAAA,CAAA;AAQD,GA/BD,CAAA;;AAiCA,EAAON,OAAAA,KAAK,CAACc,QAAN,CAAeC,GAAf,CAAmBrB,QAAnB,EAA6B,UAACsB,KAAD,EAAA;AAAA,IAAA,oBAClChB,KAAK,CAACiB,YAAN,CAAmBD,KAAnB,EAA0B;AAAEE,MAAAA,OAAO,EAAEhB,WAAAA;AAAX,KAA1B,CADkC,CAAA;AAAA,GAA7B,CAAP,CAAA;AAGD,CAAA;;AAEDT,sBAAsB,CAAC0B,SAAvB,GAAmC;AACjCxB,EAAAA,mBAAmB,EAAEyB,SAAS,CAACC,IADE;AAEjCzB,EAAAA,cAAc,EAAEwB,SAAS,CAACC,IAAAA;AAFO,CAAnC;;;;"}